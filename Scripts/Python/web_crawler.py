#!/usr/bin/env python3
"""
===========================================================================================================================================================
 /$$      /$$           /$$                /$$$$$$                                          /$$   /$$                       /$$                 /$$      
| $$  /$ | $$          | $$               /$$__  $$                                        |__/  | $$                      | $$                | $$      
| $$ /$$$| $$  /$$$$$$ | $$$$$$$         | $$  \__/  /$$$$$$   /$$$$$$$ /$$   /$$  /$$$$$$  /$$ /$$$$$$   /$$   /$$        | $$        /$$$$$$ | $$$$$$$ 
| $$/$$ $$ $$ /$$__  $$| $$__  $$ /$$$$$$|  $$$$$$  /$$__  $$ /$$_____/| $$  | $$ /$$__  $$| $$|_  $$_/  | $$  | $$ /$$$$$$| $$       |____  $$| $$__  $$
| $$$$_  $$$$| $$$$$$$$| $$  \ $$|______/ \____  $$| $$$$$$$$| $$      | $$  | $$| $$  \__/| $$  | $$    | $$  | $$|______/| $$        /$$$$$$$| $$  \ $$
| $$$/ \  $$$| $$_____/| $$  | $$         /$$  \ $$| $$_____/| $$      | $$  | $$| $$      | $$  | $$ /$$| $$  | $$        | $$       /$$__  $$| $$  | $$
| $$/   \  $$|  $$$$$$$| $$$$$$$/        |  $$$$$$/|  $$$$$$$|  $$$$$$$|  $$$$$$/| $$      | $$  |  $$$$/|  $$$$$$$        | $$$$$$$$|  $$$$$$$| $$$$$$$/
|__/     \__/ \_______/|_______/          \______/  \_______/ \_______/ \______/ |__/      |__/   \___/   \____  $$        |________/ \_______/|_______/ 
                                                                                                          /$$  | $$                                      
                                                                                                         |  $$$$$$/                                      
                                                                                                          \______/                                       
===========================================================================================================================================================
===========================================================================================================================================================
 Script     : web_crawler.py
 Auteur     : Lysius
 Date       : 29/09/2024
 Description: Script Python pour web crawler.
===========================================================================================================================================================
"""
import argparse, requests
from urllib.parse import urljoin
from bs4 import BeautifulSoup

def crawl(start_url, depth=1):
    visited = set()
    def _crawl(url, d):
        if d < 0 or url in visited:
            return
        visited.add(url)
        try:
            r = requests.get(url)
            soup = BeautifulSoup(r.text, 'html.parser')
            for link in soup.find_all('a', href=True):
                next_url = urljoin(url, link['href'])
                print(next_url)
                _crawl(next_url, d-1)
        except Exception:
            pass
    _crawl(start_url, depth)

if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('--start', required=True, help='URL de dÃ©part')
    args = parser.parse_args()
    crawl(args.start)