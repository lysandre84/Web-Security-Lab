#!/usr/bin/env bash
# ===========================================================================================================================================================
#  /$$      /$$           /$$                /$$$$$$                                          /$$   /$$                       /$$                 /$$      
# | $$  /$ | $$          | $$               /$$__  $$                                        |__/  | $$                      | $$                | $$      
# | $$ /$$$| $$  /$$$$$$ | $$$$$$$         | $$  \__/  /$$$$$$   /$$$$$$$ /$$   /$$  /$$$$$$  /$$ /$$$$$$   /$$   /$$        | $$        /$$$$$$ | $$$$$$$ 
# | $$/$$ $$ $$ /$$__  $$| $$__  $$ /$$$$$$|  $$$$$$  /$$__  $$ /$$_____/| $$  | $$ /$$__  $$| $$|_  $$_/  | $$  | $$ /$$$$$$| $$       |____  $$| $$__  $$
# | $$$$_  $$$$| $$$$$$$$| $$  \ $$|______/ \____  $$| $$$$$$$$| $$      | $$  | $$| $$  \__/| $$  | $$    | $$  | $$|______/| $$        /$$$$$$$| $$  \ $$
# | $$$/ \  $$$| $$_____/| $$  | $$         /$$  \ $$| $$_____/| $$      | $$  | $$| $$      | $$  | $$ /$$| $$  | $$        | $$       /$$__  $$| $$  | $$
# | $$/   \  $$|  $$$$$$$| $$$$$$$/        |  $$$$$$/|  $$$$$$$|  $$$$$$$|  $$$$$$/| $$      | $$  |  $$$$/|  $$$$$$$        | $$$$$$$$|  $$$$$$$| $$$$$$$/
# |__/     \__/ \_______/|_______/          \______/  \_______/ \_______/ \______/ |__/      |__/   \___/   \____  $$        |________/ \_______/|_______/ 
#                                                                                                           /$$  | $$                                      
#                                                                                                          |  $$$$$$/                                                                                                                                        \______/                                       
# ===========================================================================================================================================================
# ===========================================================================================================================================================
#  Script     : zap_scan.sh
#  Auteur     : Lysius
#  Date       : 16/04/2023
#  Description: Script Bash pour lancer Zap Scan.
# ===========================================================================================================================================================

if [ -z "$1" ]; then echo "Usage: $0 <target>"; exit 1; fi
target=$1; out="reports/zap/$(date +%F_%T)"
mkdir -p $out; docker run --rm -v $(pwd)/tools/zap_config.json:/zap/config.json -v $(pwd)/$out:/zap/reports owasp/zap2docker-stable zap-baseline.py -t $target -r report.html
mv report.html $out/